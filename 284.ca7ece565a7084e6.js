"use strict";(self.webpackChunkshop_ang_19=self.webpackChunkshop_ang_19||[]).push([[284],{6284:(S,l,n)=>{n.r(l),n.d(l,{MeComponent:()=>D});var a=n(177),e=n(3953),p=n(3664),s=n(9967),f=n(1985);let g=(()=>{class t{firestore;constructor(u){this.firestore=u}converter(){return{toFirestore:u=>({...u}),fromFirestore:u=>u.data()}}getDocument(u,r){const o=(0,s.rJ)(this.firestore,u).withConverter(this.converter()),c=(0,s.H9)(o,r);return new f.c(d=>{(0,s.x7)(c).then(F=>{d.next(F.exists()?F.data():void 0),d.complete()}).catch(F=>d.error(F))})}getCollection(u){const r=(0,s.rJ)(this.firestore,u).withConverter(this.converter());return(0,s.xs)(r,{idField:"id"})}addDocument(u,r){const o=(0,s.rJ)(this.firestore,u).withConverter(this.converter());return(0,s.gS)(o,r).then(c=>c.id)}updateDocument(u,r,o){const c=(0,s.rJ)(this.firestore,u).withConverter(this.converter()),d=(0,s.H9)(c,r);return(0,s.mZ)(d,o)}deleteDocument(u,r){const o=(0,s.rJ)(this.firestore,u),c=(0,s.H9)(o,r);return(0,s.kd)(c)}static \u0275fac=function(r){return new(r||t)(e.KVO(s._7))};static \u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),h=(()=>{class t{firebaseRepository;collectionName="orders";constructor(u){this.firebaseRepository=u}createOrder(u){return this.firebaseRepository.addDocument(this.collectionName,u)}getOrders(u){return this.firebaseRepository.getCollection(this.collectionName)}getOrderById(u){return this.firebaseRepository.getDocument(this.collectionName,u)}static \u0275fac=function(r){return new(r||t)(e.KVO(g))};static \u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function E(t,i){1&t&&(e.j41(0,"div",4),e.EFF(1," \u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f...\n"),e.k0s())}function m(t,i){if(1&t&&(e.j41(0,"div",5),e.EFF(1),e.k0s()),2&t){const u=e.XpG();e.R7$(),e.SpI(" ",u.errorMessage,"\n")}}function v(t,i){if(1&t&&(e.j41(0,"div")(1,"p")(2,"strong"),e.EFF(3,"\u0406\u043c'\u044f \u043e\u0442\u0440\u0438\u043c\u0443\u0432\u0430\u0447\u0430:"),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"p")(6,"strong"),e.EFF(7,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"),e.k0s(),e.EFF(8),e.k0s(),e.j41(9,"p")(10,"strong"),e.EFF(11,"\u0410\u0434\u0440\u0435\u0441\u0430:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"p")(14,"strong"),e.EFF(15,"\u041f\u043e\u0448\u0442\u043e\u0432\u0438\u0439 \u043a\u043e\u0434:"),e.k0s(),e.EFF(16),e.k0s(),e.j41(17,"p")(18,"strong"),e.EFF(19,"\u041a\u0440\u0430\u0457\u043d\u0430:"),e.k0s(),e.EFF(20),e.k0s()()),2&t){const u=e.XpG(2);e.R7$(4),e.SpI(" ",u.user.address.fullName,""),e.R7$(4),e.SpI(" ",u.user.address.phone,""),e.R7$(4),e.Lme(" ",u.user.address.address,", ",u.user.address.city,""),e.R7$(4),e.SpI(" ",u.user.address.postalCode,""),e.R7$(4),e.SpI(" ",u.user.address.country,"")}}function k(t,i){if(1&t&&(e.j41(0,"li")(1,"p")(2,"strong"),e.EFF(3,"\u0421\u0442\u0430\u0442\u0443\u0441:"),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"p")(6,"strong"),e.EFF(7,"\u0421\u0443\u043c\u0430:"),e.k0s(),e.EFF(8),e.nI1(9,"currency"),e.k0s(),e.j41(10,"p")(11,"strong"),e.EFF(12,"\u0414\u0430\u0442\u0430 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f:"),e.k0s(),e.EFF(13),e.nI1(14,"date"),e.k0s()()),2&t){const u=i.$implicit;e.R7$(4),e.SpI(" ",u.status,""),e.R7$(4),e.SpI(" ",e.bMT(9,3,u.totalAmount),""),e.R7$(5),e.SpI(" ",e.bMT(14,5,u.createdAt),"")}}function I(t,i){if(1&t&&(e.j41(0,"div")(1,"ul"),e.DNE(2,k,15,7,"li",7),e.k0s()()),2&t){const u=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",u.orders)}}function R(t,i){1&t&&(e.j41(0,"p"),e.EFF(1,"\u0423 \u0432\u0430\u0441 \u0449\u0435 \u043d\u0435\u043c\u0430\u0454 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c."),e.k0s())}function C(t,i){if(1&t&&(e.j41(0,"div")(1,"h2"),e.EFF(2,"\u041f\u0440\u043e\u0444\u0456\u043b\u044c \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"\u0406\u043c'\u044f:"),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"p")(8,"strong"),e.EFF(9,"Email:"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"p")(12,"strong"),e.EFF(13,"\u0414\u0430\u0442\u0430 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u0430\u043a\u0430\u0443\u043d\u0442\u0443:"),e.k0s(),e.EFF(14),e.nI1(15,"date"),e.k0s(),e.j41(16,"p")(17,"strong"),e.EFF(18,"\u041e\u0441\u0442\u0430\u043d\u043d\u0456\u0439 \u0432\u0445\u0456\u0434:"),e.k0s(),e.EFF(19),e.nI1(20,"date"),e.k0s(),e.j41(21,"h3"),e.EFF(22,"\u0410\u0434\u0440\u0435\u0441\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),e.k0s(),e.DNE(23,v,21,6,"div",3),e.j41(24,"h3"),e.EFF(25,"\u0412\u0430\u0448\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"),e.k0s(),e.DNE(26,I,3,1,"div",6)(27,R,2,0,"ng-template",null,0,e.C5r),e.k0s()),2&t){const u=e.sdS(28),r=e.XpG();e.R7$(6),e.SpI(" ",r.user.name,""),e.R7$(4),e.SpI(" ",r.user.email,""),e.R7$(4),e.SpI(" ",e.bMT(15,7,r.user.createdAt),""),e.R7$(5),e.SpI(" ",e.bMT(20,9,r.user.updatedAt),""),e.R7$(4),e.Y8G("ngIf",r.user.address),e.R7$(3),e.Y8G("ngIf",r.orders.length>0)("ngIfElse",u)}}let D=(()=>{class t{authService;orderService;user=null;orders=[];isLoading=!0;errorMessage="";constructor(u,r){this.authService=u,this.orderService=r,(0,e.QZP)(()=>{this.user=this.authService.currentUserSig(),this.user?(this.loadOrders(this.user.id),this.isLoading=!1):(this.errorMessage="\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u0438\u0439!",this.isLoading=!1)})}loadOrders(u){this.orderService.getOrders(u).subscribe({next:r=>{this.orders=r},error:r=>{this.errorMessage="\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u0456 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c",console.error(r)}})}static \u0275fac=function(r){return new(r||t)(e.rXU(p.u),e.rXU(h))};static \u0275cmp=e.VBU({type:t,selectors:[["app-me"]],decls:3,vars:3,consts:[["noOrders",""],["class","loading-spinner",4,"ngIf"],["class","error-message",4,"ngIf"],[4,"ngIf"],[1,"loading-spinner"],[1,"error-message"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"]],template:function(r,o){1&r&&e.DNE(0,E,2,0,"div",1)(1,m,2,1,"div",2)(2,C,29,11,"div",3),2&r&&(e.Y8G("ngIf",o.isLoading),e.R7$(),e.Y8G("ngIf",o.errorMessage),e.R7$(),e.Y8G("ngIf",o.user))},dependencies:[a.MD,a.Sq,a.bT,a.oe,a.vh],encapsulation:2})}return t})()}}]);