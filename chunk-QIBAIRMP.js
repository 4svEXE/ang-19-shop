import{C as c,D as g,F as v,G as o,H as U,I as u,y as a,z as d}from"./chunk-OFJJK5OL.js";import{Ea as m,aa as l,ga as p,s as r,x as h}from"./chunk-SGSG5N6W.js";var b=class n{auth=p(d);currentUserSig=m(null);constructor(){c(this.auth).pipe(h(t=>t?this.mapUser(t):null)).subscribe(t=>this.currentUserSig.set(t))}register(t,e,s){let i=g(this.auth,t,s).then(f=>u(f.user,{displayName:e})).then(()=>this.updateCurrentUser());return r(i)}login(t,e){let s=v(this.auth,t,e).then(()=>this.updateCurrentUser());return r(s)}logout(){let t=U(this.auth).then(()=>this.currentUserSig.set(null));return r(t)}loginWithGoogle(){let t=new a,e=o(this.auth,t).then(()=>this.updateCurrentUser());return r(e)}registerWithGoogle(){let t=new a,e=o(this.auth,t).then(s=>{let i=s.user;return i?u(i,{displayName:i.displayName}):Promise.resolve()}).then(()=>this.updateCurrentUser());return r(e)}updateCurrentUser(){let t=this.auth.currentUser;this.currentUserSig.set(t?this.mapUser(t):null)}mapUser(t){return{id:t.uid,email:t.email??"",name:t.displayName??"",createdAt:t.metadata.creationTime??"",updatedAt:t.metadata.lastSignInTime??""}}static \u0275fac=function(e){return new(e||n)};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})};export{b as a};
